<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Formulário Dinâmico</title>
    <style>
        body, h2, h3, p, label, input, select, textarea, button {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background-color: #f9f9f9;
            color: #333;
            line-height: 1.6;
        }

        h2, h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            text-align: center;
        }

        h3 {
            margin-top: 20px;
        }

        form {
            max-width: 900px;
            margin: 20px auto;
            padding: 30px;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            font-weight: bold;
            color: #34495e;
            display: block;
            margin-bottom: 5px;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ced6e0;
            border-radius: 5px;
            background-color: #f8f9fa;
            font-size: 14px;
            color: #495057;
            margin-bottom: 10px;
            outline: none;
            transition: border-color 0.3s ease;
        }

        input:focus, select:focus, textarea:focus {
            border-color: #3498db;
        }

        textarea {
            resize: vertical;
        }

        button {
            background-color: #3498db;
            color: #fff;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: #2980b9;
        }

        .dynamic-section {
            padding: 20px;
            border: 1px solid #dfe6e9;
            border-radius: 8px;
            background-color: #fff;
            margin-bottom: 20px;
        }

        .dynamic-section h3 {
            margin-top: 0;
            color: #2d3436;
        }


        .photo-options {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            margin-top: 20px;
        }

        .photo-options label {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            transition: transform 0.3s ease;
            width: 100%;
            max-width: 400px;
        }

        .photo-options label:hover {
            transform: scale(1.05);
        }

        .photo-options input[type="radio"] {
            display: none;
        }

        .photo-options .option-image {
            width: 100%;
            height: auto;
            border: 3px solid transparent;
            border-radius: 10px;
            transition: border-color 0.3s ease;
        }

        .photo-options input[type="radio"]:checked + .option-image {
            border-color: #3498db;
        }

        .photo-options span {
            font-size: 16px;
            color: #2c3e50;
            margin-top: 10px;
        }

        /* Layout para formulários de encontro e atividades */
        .encontros-container, .activities-container {
            margin-top: 15px;
        }

        /* Responsividade */
        @media (max-width: 768px) {
            form {
                padding: 20px;
            }

            input, select, textarea {
                font-size: 13px;
            }

            h2, h3 {
                font-size: 18px;
            }

            .photo-options {
                gap: 10px;
            }
        }

    </style>
</head>
<body>
    <h2>MATRIZ DE PLANEJAMENTO E DESIGN EDUCACIONAL</h2>
    <form id="dynamicForm">
        <h2>DADOS GERAIS</h2>
        <div class="form-group">
            <label for="curso">Curso</label>
            <input type="text" id="curso" name="curso" class="input-field">
        </div>
        <div class="form-group">
            <label for="disciplina">Disciplina</label>
            <input type="text" id="disciplina" name="disciplina" class="input-field">
        </div>
        <div class="form-group">
            <label for="semestre">Semestre</label>
            <input type="text" id="semestre" name="semestre" class="input-field">
        </div>
        <div class="form-group">
            <label for="periodoPlanejamento">Período letivo de planejamento</label>
            <input type="text" id="periodoPlanejamento" name="periodoPlanejamento" class="input-field">
        </div>
        <div class="form-group">
            <label for="periodoOferta">Período letivo de oferta</label>
            <input type="text" id="periodoOferta" name="periodoOferta" class="input-field">
        </div>
        <div class="form-group">
            <label for="formatoOferta">Formato de oferta da disciplina</label>
            <input type="text" id="formatoOferta" name="formatoOferta" class="input-field">
        </div>
        <div class="form-group">
            <label for="professor">Professor(a)</label>
            <input type="text" id="professor" name="professor" class="input-field">
        </div>
        
        <h2>COMPOSIÇÃO DE NOTA</h2>
        <div class="photo-options">
            <label>
                <input type="radio" name="modeloFoto" value="modelo1">
                <img src="images/image.png" alt="Modelo 1" class="option-image">
                <span>Modelo Modular</span>
            </label>
            <label>
                <input type="radio" name="modeloFoto" value="modelo2">
                <img src="images/image2.png" alt="Modelo 2" class="option-image">
                <span>Modelo Semestral</span>
            </label>
        </div>

        <h2>DESCRIÇÃO DO MURAL</h2>
        <div class="form-group">
            <label for="comentario">Descrição</label>
            <textarea id="comentario" name="comentario" rows="6" class="input-field"></textarea>
        </div>

        <h2>DISTRIBUIÇÃO DE CARGA HORÁRIA</h2>
        <div class="form-group">
            <label for="cargaTotal">Carga horária total da disciplina</label>
            <input type="text" id="cargaTotal" name="cargaTotal" class="input-field">
        </div>
        <div class="form-group">
            <label for="cargaDistancia">Carga horária a distância</label>
            <input type="text" id="cargaDistancia" name="cargaDistancia" class="input-field">
        </div>
        <div class="form-group">
            <label for="chSincInput">CH síncrona (meets)</label>
            <input type="text" id="chSincInput" name="chSincInput" class="input-field">
        </div>
        <div class="form-group">
            <label for="chAssincrona">CH Assíncrona</label>
            <input type="number" id="chAssincrona" name="chAssincrona" class="input-field">
        </div>
        <div class="form-group">
            <label for="chPresencialInput">Carga horária presencial</label>
            <input type="text" id="chPresencialInput" name="chPresencialInput" class="input-field">
        </div>
        <div class="form-group">
            <label for="totalUnidades">Total de unidades da disciplina</label>
            <select id="totalUnidades" name="totalUnidades" class="input-field" onchange="generateUnits()">
                <option value="0">Selecione</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
            </select>
        </div>

        <div id="dynamic-fields"></div>


        <button type="button" onclick="validar()">Validar</button>
        <!-- <button type="button" id="salvarDados">Salvar</button> -->
    </form>

<script>
    function generateUnits() {
        const container = document.getElementById("dynamic-fields");
        container.innerHTML = ""; 
    
        const totalUnidades = document.getElementById("totalUnidades").value;
    
        for (let i = 1; i <= totalUnidades; i++) {
            const unitSection = document.createElement("div");
            unitSection.classList.add("dynamic-section");
            unitSection.setAttribute("data-unit", i); 
    
            const title = document.createElement("h3");
            title.textContent = `Informe os detalhes da Unidade ${i}`;
            unitSection.appendChild(title);
    
            const fields = [
                { label: "Unidade", type: "text", name: `unidade${i}` },
                { label: "CH do semestre", type: "text", name: `chSemestre${i}` },
                { label: "Começo do período", type: "text", name: `inicioPeriodo${i}` },
                { label: "Término do período", type: "text", name: `fimPeriodo${i}` },
                { label: "Título da unidade", type: "text", name: `tituloUnidade${i}` },
            ];
    
            fields.forEach(field => {
                const label = document.createElement("label");
                label.textContent = field.label;
                const input = document.createElement("input");
                input.type = field.type;
                input.name = field.name;
                unitSection.appendChild(label);
                unitSection.appendChild(input);
                });
    
            const labelDescricao = document.createElement("label");
                labelDescricao.textContent = "Descrição do conteúdo da unidade";
                const textarea = document.createElement("textarea");
                textarea.name = `descricaoUnidade${i}`;
                textarea.rows = 4;
                unitSection.appendChild(labelDescricao);
                unitSection.appendChild(textarea);
    
            const labelEncontros = document.createElement("label");
                labelEncontros.textContent = "Informe o total de encontros presenciais e síncronos da unidade";
                const encontrosSelect = document.createElement("select");
                encontrosSelect.name = `totalEncontros${i}`;
                encontrosSelect.id = `totalEncontros${i}`;
                encontrosSelect.innerHTML = `
                    <option value="0">Selecione</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                `;
                encontrosSelect.onchange = function() { generateEncontros(i, encontrosSelect.value); };
                unitSection.appendChild(labelEncontros);
                unitSection.appendChild(encontrosSelect);
    
            const encontrosContainer = document.createElement("div");
                encontrosContainer.classList.add("encontros-container");
                unitSection.appendChild(encontrosContainer);
    
            const activitiesLabel = document.createElement("label");
                activitiesLabel.textContent = "Informe o total de atividades da unidade";
            const activitiesSelect = document.createElement("select");
                activitiesSelect.name = `atividadesUnidade${i}`;
                activitiesSelect.id = `atividadesUnidade${i}`;
                activitiesSelect.innerHTML = `
                    <option value="0">Selecione</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                `;
                activitiesSelect.onchange = function() {
                    generateActivities(i, activitiesSelect.value);
                };
                unitSection.appendChild(activitiesLabel);
                unitSection.appendChild(activitiesSelect);
    
            const activitiesContainer = document.createElement("div");
                activitiesContainer.classList.add("activities-container");
                unitSection.appendChild(activitiesContainer);
    
                container.appendChild(unitSection);
            }
        }
    
        function generateEncontros(unitNumber, numEncontros) {
            const unitSection = document.querySelector(`.dynamic-section[data-unit="${unitNumber}"]`);
            let encontrosContainer = unitSection.querySelector(".encontros-container");
    
            encontrosContainer.innerHTML = "";
    
            for (let i = 1; i <= numEncontros; i++) {
                const encontroSection = document.createElement("div");
                encontroSection.classList.add("dynamic-section");
    
                const title = document.createElement("h3");
                title.textContent = `Informe os detalhes do encontro ${i}`;
                encontroSection.appendChild(title);
    
                const encontroFields = [
                    { label: "Qual será o encontro?", type: "select", name: `encontroTipo${unitNumber}_${i}`, options: ["Selecione", "Síncrono", "Presencial"] },
                    { label: "Data", type: "date", name: `dataEncontro${unitNumber}_${i}` },
                    { label: "CH do encontro", type: "text", name: `chEncontro${unitNumber}_${i}` },
                    { label: "Começo da aula", type: "time", name: `inicioAula${unitNumber}_${i}` },
                    { label: "Término da aula", type: "time", name: `fimAula${unitNumber}_${i}` },
                    { label: "Frequência", type: "select", name: `frequenciaEncontro${unitNumber}_${i}`, options: ["Selecione", "Sim", "Não"] },
                ];
    
                encontroFields.forEach(field => {
                    const label = document.createElement("label");
                    label.textContent = field.label;
                    let input;
    
                    if (field.type === "select") {
                        input = document.createElement("select");
                        field.options.forEach(option => {
                            const optionElement = document.createElement("option");
                            optionElement.value = option;
                            optionElement.textContent = option;
                            input.appendChild(optionElement);
                        });
                    } else {
                        input = document.createElement("input");
                        input.type = field.type;
                    }
    
                    input.name = field.name;
                    encontroSection.appendChild(label);
                    encontroSection.appendChild(input);
                });
    
                const labelDescricao = document.createElement("label");
                labelDescricao.textContent = "Descrição/Enunciado";
                const textarea = document.createElement("textarea");
                textarea.name = `descricaoEncontro${unitNumber}_${i}`;
                textarea.rows = 4;
                encontroSection.appendChild(labelDescricao);
                encontroSection.appendChild(textarea);
    
                encontrosContainer.appendChild(encontroSection);
            }
        }
    
        function generateActivities(unitNumber, numActivities) {
            const unitSection = document.querySelector(`.dynamic-section[data-unit="${unitNumber}"]`);
            let activitiesContainer = unitSection.querySelector(".activities-container");
    
            activitiesContainer.innerHTML = "";  
    
            for (let i = 1; i <= numActivities; i++) {
                const activitySection = document.createElement("div");
                activitySection.classList.add("dynamic-section");
    
                const title = document.createElement("h3");
                title.textContent = `Informe os detalhes da Atividade ${i}`;
                activitySection.appendChild(title);
    
                const activityFields = [
                    { label: "Qual é a atividade", type: "select", name: `atividadeTipo${unitNumber}_${i}`, options: ["Selecione", "Wiki", "Fórum", "Tarefa", "Quiz", "Glossário"] },
                    { label: "CH da atividade", type: "text", name: `chAtividade${unitNumber}_${i}` },
                    { label: "Peso", type: "number", name: `pesoAtividade${unitNumber}_${i}`, min: 0 },
                    { label: "Avaliação", type: "select", name: `avaliacaoAtividade${unitNumber}_${i}`, options: ["Selecione", "Sem nota", "Nota média"] },
                    { label: "Frequência", type: "select", name: `frequenciaAtividade${unitNumber}_${i}`, options: ["Selecione", "Sim", "Não"] },
                    { label: "Título da atividade", type: "text", name: `tituloAtividade${unitNumber}_${i}` },
                ];
    
                activityFields.forEach(field => {
                    const label = document.createElement("label");
                    label.textContent = field.label;
                    let input;
                    if (field.type === "select") {
                        input = document.createElement("select");
                        input.name = field.name;
                        field.options.forEach(option => {
                            const optionElement = document.createElement("option");
                            optionElement.textContent = option;
                            optionElement.value = option;
                            input.appendChild(optionElement);
                        });
                    } else {
                        input = document.createElement("input");
                        input.type = field.type;
                        input.name = field.name;
                        if (field.min) input.min = field.min;
                    }
    
                    activitySection.appendChild(label);
                    activitySection.appendChild(input);
                });
    
                const labelDescricao = document.createElement("label");
                labelDescricao.textContent = "Descrição/Enunciado";
                const textarea = document.createElement("textarea");
                textarea.name = `descricaoAtividade${unitNumber}_${i}`;
                textarea.rows = 4;
                activitySection.appendChild(labelDescricao);
                activitySection.appendChild(textarea);
    
                activitiesContainer.appendChild(activitySection);
            }
        }

    function validar() {
        let totalCHSinc = 0;
        let totalCHPresencial = 0;
        let totalCHAtividades = 0;
        const totalUnidades = document.getElementById("totalUnidades").value;
        
        for (let i = 1; i <= totalUnidades; i++) {
            const totalAtividades = document.getElementById(`atividadesUnidade${i}`).value;

            if (isNaN(totalAtividades) || totalAtividades <= 0) {
                console.error(`Valor inválido para o número de atividades na unidade ${i}`);
                continue;
            }

            for (let j = 1; j <= totalAtividades; j++) {
                const chAtividade = parseFloat(document.querySelector(`[name="chAtividade${i}_${j}"]`).value);
                if (!isNaN(chAtividade)) {
                    totalCHAtividades += chAtividade; 
                }
            }
        }

    const chAssincrona = parseFloat(document.getElementById("chAssincrona").value);
        if (isNaN(chAssincrona) || chAssincrona <= 0) {
            alert("Por favor, insira um valor válido para a CH assíncrona.");
            return;
        }

        if (totalCHAtividades !== chAssincrona) {
            alert(`A soma de todas as CH das atividades é ${totalCHAtividades}. O valor de CH assíncrona está incorreto.`);
            return;
        }

        alert("A soma das CH das atividades está correta!");

    let totalCHSincLocal = 0;
    let totalCHPresencialLocal = 0;

        for (let i = 1; i <= 8; i++) {
    const totalEncontrosElement = document.getElementById(`totalEncontros${i}`);
        
        if (!totalEncontrosElement) {
            console.error(`Elemento com ID totalEncontros${i} não encontrado.`);
            continue;
        }

        const numEncontros = parseInt(totalEncontrosElement.value, 10);

        if (isNaN(numEncontros)) {
            console.error(`Valor inválido para o número de encontros na unidade ${i}: ${totalEncontrosElement.value}`);
            continue;
        }

        for (let j = 1; j <= numEncontros; j++) { 
            const encontroTipo = document.querySelector(`[name="encontroTipo${i}_${j}"]`).value; 
            const chEncontro = parseFloat(document.querySelector(`[name="chEncontro${i}_${j}"]`).value);

            if (encontroTipo === "Síncrono" && !isNaN(chEncontro)) {
                totalCHSincLocal += chEncontro;
            }

            if (encontroTipo === "Presencial" && !isNaN(chEncontro)) {
                totalCHPresencialLocal += chEncontro;
            }
        }
    }

    const chSincInput = parseFloat(document.getElementById("chSincInput").value);
    const chPresencialInput = parseFloat(document.getElementById("chPresencialInput").value); 

    if (isNaN(chSincInput)) {
        alert("Por favor, insira um valor válido para a CH síncrona.");
        return;
    }
    if (totalCHSincLocal !== chSincInput) {
        alert(`A soma da CH síncrona (${totalCHSincLocal}) não é igual à CH síncrona fornecida (${chSincInput}).`);
    } else {
        alert("Validação da CH síncrona bem-sucedida.");
    }

    if (isNaN(chPresencialInput)) {
        alert("Por favor, insira um valor válido para a Carga horária presencial.");
        return;
    }
    if (totalCHPresencialLocal !== chPresencialInput) {
        alert(`A soma da CH presencial (${totalCHPresencialLocal}) não é igual à Carga horária presencial fornecida (${chPresencialInput}).`);
    } else {
        alert("Validação da CH presencial bem-sucedida.");
    }
}
</script>
</body>
</html>